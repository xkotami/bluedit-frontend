(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1854)}])},1854:function(e,t,n){"use strict";n.r(t);var s=n(5893),o=n(7294),i=n(1163),r=n(9008),a=n.n(r),l=n(7331),c=n(8137),d=n.n(c),p=n(3479);t.default=()=>{let[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(!0),[c,x]=(0,o.useState)(""),h=(0,i.useRouter)();(0,o.useEffect)(()=>{g()},[]);let g=async()=>{try{let e=await p.WY.getAllPosts();if(e.success&&e.data){let n=e.data.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime());t(n)}else x("Failed to load posts")}catch(e){x("Failed to load posts"),console.error("Error loading posts:",e)}finally{r(!1)}},u=e=>{let t=new Date,n=new Date(e),s=Math.floor((t.getTime()-n.getTime())/36e5),o=Math.floor(s/24);return s<1?"Less than an hour ago":s<24?"".concat(s," hour").concat(s>1?"s":""," ago"):o<7?"".concat(o," day").concat(o>1?"s":""," ago"):n.toLocaleDateString()},m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return e.length<=t?e:e.substring(0,t)+"..."},f=e=>{h.push("/posts/".concat(e))},j={backgroundColor:"white",border:"1px solid #e1e1e1",borderRadius:"8px",padding:"20px",marginBottom:"16px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"box-shadow 0.2s ease, transform 0.1s ease",cursor:"pointer"},y={boxShadow:"0 4px 8px rgba(0,0,0,0.15)",transform:"translateY(-1px)"},b={display:"flex",alignItems:"center",marginBottom:"12px",fontSize:"14px",color:"#666"},w={color:"#007bff",fontWeight:"600",textDecoration:"none"},v={color:"#333",fontWeight:"500"},_={color:"#28a745",fontSize:"12px",marginLeft:"4px"},S={margin:"0 8px",color:"#ccc"},A={fontSize:"20px",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",lineHeight:"1.3"},C={fontSize:"16px",lineHeight:"1.5",color:"#333",marginBottom:"16px"},D={display:"flex",alignItems:"center",gap:"16px",fontSize:"14px",color:"#666"},T={display:"flex",alignItems:"center",gap:"4px"},k={backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"6px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:"pointer",textDecoration:"none",display:"inline-block",marginTop:"16px"};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a(),{children:[(0,s.jsx)("title",{children:"Home"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"})]}),(0,s.jsx)(l.Z,{}),(0,s.jsxs)("main",{className:d().main,children:[n&&(0,s.jsx)("div",{style:{textAlign:"center",padding:"60px 20px",fontSize:"18px",color:"#666"},children:"Loading posts..."}),c&&(0,s.jsx)("div",{style:{textAlign:"center",padding:"40px 20px",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"8px",margin:"20px",border:"1px solid #f5c6cb"},children:c}),!n&&!c&&(0,s.jsx)("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"0 20px"},children:0===e.length?(0,s.jsxs)("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[(0,s.jsx)("h3",{children:"No posts yet!"}),(0,s.jsx)("p",{children:"Be the first to share something with the community."}),(0,p.$8)()&&(0,s.jsx)("a",{href:"/posts/create",style:k,children:"Create First Post"})]}):(0,s.jsxs)(s.Fragment,{children:[e.map(e=>{var t,n;return(0,s.jsxs)("div",{style:j,onClick:()=>f(e.id),onMouseEnter:e=>Object.assign(e.currentTarget.style,y),onMouseLeave:e=>Object.assign(e.currentTarget.style,j),children:[(0,s.jsxs)("div",{style:b,children:[(0,s.jsx)("span",{style:w,children:"r/community"}),(0,s.jsx)("span",{style:S,children:"•"}),(0,s.jsx)("span",{children:"Posted by "}),(0,s.jsxs)("span",{style:v,children:["u/",e.user.username]}),(0,s.jsxs)("span",{style:_,children:["(",e.user.points," pts)"]}),(0,s.jsx)("span",{style:S,children:"•"}),(0,s.jsx)("span",{children:u(e.createdAt)})]}),(0,s.jsx)("h3",{style:A,children:e.title}),(0,s.jsx)("p",{style:C,children:m(e.content)}),(0,s.jsxs)("div",{style:D,children:[(0,s.jsxs)("div",{style:T,children:[(0,s.jsx)("span",{children:"▲"}),(0,s.jsx)("span",{children:(null===(t=e.comments)||void 0===t?void 0:t.length)||0})]}),(0,s.jsxs)("div",{style:T,children:[(0,s.jsx)("span",{children:"\uD83D\uDCAC"}),(0,s.jsxs)("span",{children:[(null===(n=e.comments)||void 0===n?void 0:n.length)||0," comments"]})]})]})]},e.id)}),(0,p.$8)()&&(0,s.jsx)("div",{style:{textAlign:"center",marginTop:"40px",paddingBottom:"40px"},children:(0,s.jsx)("a",{href:"/posts/create",style:k,children:"Create New Post"})})]})})]})]})}},8137:function(e){e.exports={main:"home_main__gAgsa"}},9008:function(e,t,n){e.exports=n(3867)}},function(e){e.O(0,[424,219,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);