(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44],{6595:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/community",function(){return i(7936)}])},7936:function(e,t,i){"use strict";i.r(t);var o=i(5893),n=i(7294),r=i(1163),s=i(6660),a=i(3479),d=i(7331);t.default=()=>{let[e,t]=(0,n.useState)([]),[i,l]=(0,n.useState)([]),[c,u]=(0,n.useState)(!0),[p,x]=(0,n.useState)(""),[m,h]=(0,n.useState)(null),g=(0,r.useRouter)();(0,n.useEffect)(()=>{y(),(0,s.$8)()&&f()},[]);let y=async()=>{try{let e=await a.uv.getAllCommunities();e.success&&e.data?t(e.data):x("Failed to load communities")}catch(e){x("Failed to load communities")}finally{u(!1)}},f=async()=>{try{let e=await a.uv.getUserCommunities();e.success&&e.data&&l(e.data)}catch(e){console.error("Failed to load user communities:",e)}},b=async e=>{if(!(0,s.$8)()){g.push("/login");return}h(e);try{let t=await a.uv.joinCommunity(e);t.success?(await f(),x("")):x(t.error||"Failed to join community")}catch(e){x("Failed to join community")}finally{h(null)}},v=async e=>{h(e);try{let t=await a.uv.leaveCommunity(e);t.success?(await f(),x("")):x(t.error||"Failed to leave community")}catch(e){x("Failed to leave community")}finally{h(null)}},j=e=>i.some(t=>t.id===e),w={maxWidth:"800px",margin:"0 auto",padding:"20px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},C={backgroundColor:"white",border:"1px solid #e1e1e1",borderRadius:"8px",padding:"20px",marginBottom:"16px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"box-shadow 0.2s ease"},k={display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},S={fontSize:"20px",fontWeight:"600",color:"#1a1a1a",marginBottom:"4px",cursor:"pointer",textDecoration:"none"},_={fontSize:"14px",color:"#666",marginBottom:"8px"},B={color:"#555",lineHeight:"1.5",marginBottom:"0"},F={backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},z={backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},R={backgroundColor:"#ccc",cursor:"not-allowed"};return c?(0,o.jsx)("div",{style:w,children:(0,o.jsx)("div",{style:{textAlign:"center",padding:"40px",fontSize:"18px",color:"#666"},children:"Loading communities..."})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Z,{}),(0,o.jsxs)("div",{style:w,children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"1px solid #e1e1e1"},children:[(0,o.jsx)("h1",{style:{fontSize:"32px",fontWeight:"700",color:"#1a1a1a",margin:0},children:"Communities"}),(0,s.$8)()&&(0,o.jsx)("a",{href:"/communities/create",style:{backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"6px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:"pointer",textDecoration:"none",display:"inline-block"},children:"Create Community"})]}),p&&(0,o.jsx)("div",{style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"12px",borderRadius:"4px",marginBottom:"20px",border:"1px solid #f5c6cb"},children:p}),(0,o.jsxs)("div",{children:[e.map(e=>{var t,i;return(0,o.jsx)("div",{style:C,children:(0,o.jsxs)("div",{style:k,children:[(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsxs)("div",{style:S,onClick:()=>g.push("/communities/".concat(e.id)),children:["r/",e.name]}),(0,o.jsxs)("div",{style:_,children:[(null===(t=e.users)||void 0===t?void 0:t.length)||0," members â€¢ ",(null===(i=e.posts)||void 0===i?void 0:i.length)||0," posts"]}),(0,o.jsx)("p",{style:B,children:e.description})]}),(0,s.$8)()&&(0,o.jsx)("div",{children:j(e.id)?(0,o.jsx)("button",{style:{...z,...m===e.id?R:{}},onClick:()=>v(e.id),disabled:m===e.id,children:m===e.id?"Leaving...":"Leave"}):(0,o.jsx)("button",{style:{...F,...m===e.id?R:{}},onClick:()=>b(e.id),disabled:m===e.id,children:m===e.id?"Joining...":"Join"})})]})},e.id)}),0===e.length&&(0,o.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:["No communities found. ",(0,s.$8)()&&"Create the first one!"]})]})]})]})}}},function(e){e.O(0,[424,219,888,774,179],function(){return e(e.s=6595)}),_N_E=e.O()}]);